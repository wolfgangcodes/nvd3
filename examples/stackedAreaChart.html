<!DOCTYPE html>
<meta charset="utf-8">

<link href="../src/nv.d3.css" rel="stylesheet" type="text/css">

<style>

body {
  overflow-y:scroll;
}

text {
  font: 12px sans-serif;
}

#chart1, #chart2 {
  height: 500px;
}

</style>
<body>

  <div>
    <svg id="chart1"></svg>
  </div>

<script src="../lib/d3.v2.js"></script>
<script src="../nv.d3.js"></script>
<script src="../src/utils.js"></script>
<script src="../src/models/axis.js"></script>
<script src="../src/tooltip.js"></script>
<script src="../src/models/legend.js"></script>
<script src="../src/models/axis.js"></script>
<script src="../src/models/scatter.js"></script>
<script src="../src/models/stackedArea.js"></script>
<script src="../src/models/stackedAreaChart.js"></script>
<script>


var histcatexplong = [{"key":"users","values":[]}]
function makeData(x, y, numDataPoints){
  var ret = []
  var today = new Date().getTime()
  for(var i = 0; i < numDataPoints; i++){
    var datum = {}
    datum[x] = today + i * 7 * 24 * 60 * 60 * 1000
    datum[y] = Math.floor(Math.random() * 10000)
    ret.push(datum)
  }
  return ret;
}

var colors = d3.scale.category20();
keyColor = function(d, i) {return colors(d.key)};

var chart;
var x = 'week';
var y = 'users';
histcatexplong[0].values = makeData(x, y, 50)

nv.addGraph(function() {
  chart = nv.models.stackedAreaChart()
                .x(function(d) { return new Date(d[x]) })
                .y(function(d) { return d[y] })
                .color(keyColor)
                //.clipEdge(true);

  chart.xAxis
      .tickFormat(function(d) { return d3.time.format('%x')(new Date(d)) });

  chart.yAxis
      .tickFormat(d3.format(',.2f'));

  chart.yAxis.showMaxMin(false);
  chart.numTicks(5);
  chart.stacked.clipRadius(100000000)
  d3.select('#chart1')
    .datum(histcatexplong)
      .transition().duration(500).call(chart);

  nv.utils.windowResize(chart.update);

  chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

  return chart;
});




</script>
